<template>
    <div class="Platforms">
        <div class="projects">
            <div class="grey-gradient" style="margin-top:-300px;">
                <div class="intro-space" style="padding-bottom:0px;">

                    <div class="intro-title" style="">
                        DIGI<span class="livedata-pulse">CURE</span>
                    </div>
                    <div class="intro-subtitle" style="">
                        Digital <br>Cultural <br>Resilience <br> & Protection</div>

                    <div class="intro-article" style="">

                        DIGICURE, hosted by the Gothenburg Research Infrastructure in Digital Humanities (GRIDH),
                        is designed to <span>safeguard endangered cultural heritage</span> while advancing digitally
                        supported research across a wide range of disciplines in the humanities and beyond. Through
                        strategic collaborations and training programs,
                        DIGICURE is designed to empower heritage professionals,
                        researchers, and institutions with the tools and knowledge
                        needed to safeguard cultural assets for future generations.
                        To digitize cultural heritage is a monumental task always in need of
                    <span>state-of-the-art expertise</span> and broader perspectives.
                        Crucially, DigiCURE is designed to meet both preservation needs and
                        the evolving requirements of scholarly research,
                        offering tools, expertise, and workflows that ensure <span>accessibility,
                        interoperability, and analytical depth</span>.

                    </div>
                </div>

                <div class="row" style="align-items: flex-start; padding-bottom:20px;">
                    <div class="info-module" style="">
                        <div class="text-module left">
                            <div class="text-module-data">
                                <span class="livedata-pulse">7</span> courses
                            </div>
                            <div class="text-module-description">
                                DIGICURE is contributing with expertise for several
                                international courses hosted at <span>Swedish universities</span> and <span>Ukrainian
                                    heritage organisations</span>. These range from lectures about digitising sensitive
                                and threatened heritage, to <span>hands-on and in-depth workshops</span> on specific
                                workflows and technologies.
                            </div>
                        </div>
                    </div>

                    <div class="info-module" style="">
                        <div class="text-module right">
                            <div class="text-module-data"><span class="livedata-pulse">26</span> organisations 
                            </div>
                            <div class="text-module-description">
                                More than twentyfive organisations in Sweden,
                                Lithuania, and Ukraine have invited experts from DIGICURE to lecture and give workshops
                                in digital contingency planning. Among these are <span>ICOM, Europa Nostra,</span>
                                <span>the National History Museum of Ukraine, and the Swedish Institute in Rome</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="projects-container">

                <div class="row">
                    <div class="row-left">
                        <div class="data-module">
                            <div class="buffer">
                                <div class="module">
                                    <div class="image-stack left">
                                        <div class="image-stack-items-container">

                                            <div class="image-stack-item"
                                                style="background-image:url(digicure/sophia1.jpg); background-size:cover; z-index:2;">
                                            </div>
                                            <div class="image-stack-item"
                                                style="background-image:url(digicure/etruscan1.jpg); background-size:cover; z-index:2; margin-top:50px; margin-left:-200px;">
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-module">
                            <div class="info-module-slogan right">
                                <div class="text-module-title">Remote research</div>
                                <h1>Multimodal Platform</h1>
                                <h2>DIGICURE develops and maintain a robust multimodal platform that facilitates digital
                                    preservation and remote access of endangered cultural assets. The platform
                                    integrates various data types – <span>including high-resolution images, 3D models, and
                                    metadata</span> – to ensure comprehensive documentation and accessibility for research
                                    purposes and public engagement.
                                    The platform supports a number of projects and make available data from heritage sites
                                    in the Arctics, Antarctica, Faroe Islands, Italy, Spain, Sweden and Ukraine.</h2>
                            </div>
                        </div>
                    </div>


                    <div class="row-right">

                        <div class="info-module">
                            <div class="info-module-slogan left">
                                <div class="text-module-title">Deep data</div>
                                <h1>Multimodal digitisation</h1>
                                <h2>DigiCURE provides cutting-edge software solutions for <span>digitisation, metadata
                                    structuring, and secure archiving</span>. DigiCURE also equips researchers with
                                    high-resolution imaging, 3D scanning, and digital reconstruction tools to support
                                    detailed documentation and analysis of heritage materials.
                                </h2>
                            </div>
                        </div>
                        <div class="data-module">
                            <div class="buffer">
                                <div class="module">
                                    <div class="image-stack right">
                                        <div class="image-stack-items-container"
                                            style=" justify-content: left; padding-left:30px;  margin-right:0px;">

                                            <div class="image-stack-item-right"
                                                style="background-image:url(digicure/etruscan2.jpg); background-size:cover;z-index:3;  margin-top:60px; width:535px; ">
                                            </div>
                                            <div class="image-stack-item-right"
                                                style="background-image:url(digicure/sophia5.jpg); background-size:cover; z-index:2; margin-left:-100px; width:535px;">
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="row-left" style="padding-top:30px">
                    <div class="data-module">
                        <div class="buffer">
                            <div class="module">
                                <div class="image-stack left">
                                    <div class="image-stack-items-container">
                                        <a href="https://saintsophia.dh.gu.se/viewer/?q=113-07b/rti" target="_blank">
                                        <div class="image-stack-item" style="background-image:url(digicure/sophia3.jpg); background-size:cover; z-index:1; margin-top:50px;">
                                        </div>
                                    </a>
                                        <a href="https://digicure.dh.gu.se/ukraine" target="_blank">
                                        <div class="image-stack-item" style="background-image:url(digicure/digicure1.jpg); background-size:cover; z-index:3; margin-top:0px; margin-left:-200px;">
                                        </div>
                                    </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="info-module">
                        <div class="info-module-slogan right">
                            <div class="text-module-title">Best practices</div>
                            <h1>Multimodal expertise</h1>
                            <h2>DigiCURE facilitates expert <span>consultation services, and open-source resources to build
                                capacity in digital preservation practices</span>. DigiCURE ensures adherence to best practices
                                and standards, promoting responsible and sustainable stewardship of cultural heritage. Sharing this expertise, DigiCURE is the foundation of <span>DIGICURE:Ukraine</span>, a project that aids the Ukrainian heritage sector with training, sotware solutions and consultation.
                            </h2>
                        </div>
                    </div>
                </div>

                <div class="row pink-gradient-inverted" style="padding-top:30px; display:flex; flex-direction: column; align-items:flex-start; justify-content: center;">
                <div class="tools-container" style="">
                    <h1>Portals and tools that are using DigiCURE resources</h1>

                    <masonry-wall v-if="resources.length" :column-width="220" :items="resources" :gutter="0"
                    :responsive="true" :resize="true">
                    <template #default="{ index, item }">
                        <ProjectItem :id="item.id" :title="item.name" :url="item.links?.[0]?.['@id'] || ''"
                            :image="item.image?.large || ''" :subjectArea="item.subjectArea || []"
                            :description="item.descriptionText" 
                            :color="item.color?.[0]?.['@value'] || ''"/>
                    </template>
                </masonry-wall>
                </div>
            </div>

            </div>
        </div>
    </div>

</template>

<script setup lang="ts">
    import { fetchByResourceTemplate } from '@/db';
    import type { Tool } from '@/types';
    import { onMounted, ref } from 'vue';
    import MasonryWall from '@yeger/vue-masonry-wall';
    import ProjectItem from '@/components/ProjectItem.vue';


    const tools = ref(<Tool[] > []);
    const resources = ref(<Tool[] > []);




    onMounted(async () => {
        window.scrollTo(0, 0);
        const response = await fetchByResourceTemplate(6);
        const allTools = await translateResponse(response);

        const activeTools: Tool [] = [];


        allTools.forEach((tool: Tool) => {
                activeTools.push(tool);   
        });

        tools.value = activeTools.sort(() => Math.random() - 0.5);
    
        sortByType(tools.value);
    });

    const translateResponse = (response: any) => {
        return response.map((item: any) => ({
            id: item['o:id'] || '',
            name: item['o:title'] || 'No title',
            subject: item['dcterms:subject'] || [],
            subjectArea: item['dcterms:subject'] || [],
            descriptionText: item['bibo:shortDescription'] || [],
            image: item['thumbnail_display_urls'] || {},
            links: item['foaf:homepage'] || [],
            legacy: item['bibo:status'] || [],
            type: item['schema:category'] || [],
            color: item['schema:color'] || [],
            family: item['dcterms:isPartOf'] || [],
        }));
    };
    const digicure = "https://idun.dh.gu.se/api/items/372";

    const sortByType = (tools: Tool[]) => {
        tools.forEach((tool: Tool) => {
            if (tool.family?.[0]?.['@id'] === digicure) {
                resources.value.push(tool);
            } 
            if (tool.family?.[1]?.['@id'] === digicure) {
                resources.value.push(tool);
            }
            if (tool.family?.[2]?.['@id'] === digicure) {
                resources.value.push(tool);
            }
        });     
    };
    
</script>

<style scoped>
    .grey-gradient {
        background: linear-gradient(360deg, rgb(230, 230, 230) 0%, rgb(255, 255, 255) 100%);
    }



    .intro-title {
        font-family: "Teko", sans-serif !important;
        font-weight: 300;
        font-size: 70px;
        line-height: 0.9;
        color: var(--theme-heading);
        margin-top: 50px;
       
    }

    .intro-title span {

        font-size: 100px;
        font-weight: 300;
        vertical-align: -17px;
        color: var(--theme-livedata1-dark);
    }

    .intro-subtitle {
        font-family: "Teko", sans-serif !important;
        font-weight: 400;
        font-size: 50px;
        line-height: 0.9;
        color: var(--theme-heading);
        padding-left: 82px;
        margin-top: -8px;
    }

    .intro-article { 
        padding-left:82px; 
        padding-right:82px; 
        padding-top:30px;
    }

    .module {
        overflow: visible;
    }

    .row {
        margin-top: 30px;
    }

    .image-stack {
        width: calc(100% + 0px);
        margin-left: -50px;
        margin-top: -20px;
        height: auto;
        padding: 10px 10px;
   
    }

    .image-stack-items-container {
        width: calc(100% + 50px);
        height: auto;
        overflow: visible;
        padding: 0px 0px;
        display: flex;
        flex-direction: row;
        justify-content: right;
        margin-left: -0px;

    }

    .image-stack-item {
        flex: none;
        width: 525px;
        height: 250px;
        border-radius: 5px;
        box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease-in-out;
    }

    .image-stack-item:hover {
        transform: translateX(30px);
    }

    .image-stack-item-right {
        flex: none;
        width: 525px;
        height: 250px;
        border-radius: 5px;
        box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease-in-out;
    }

    .image-stack-item-right:hover {
        transform: translateX(-30px);
    }

    h1 {
        font-weight: 600;
    }

    h2 {
        font-weight: 300;
        margin-top:-10px!important;
    }

    .projects {
        width: 100%;
        display: block;


    }

    .tools-container{

        width:calc(100% - 120px); 
padding-left: 60px;
padding-right: 60px; 
padding-bottom:30px; 


}


    .projects-container li {
        list-style: none;
      
    }

    .legacy {
        border-top: thin dotted rgba(0 0 0 / 0.5);
        padding-bottom: 50px;
        padding-top: 20px;
        margin-top: 60px;
        width: calc(100% - 0px);
    }

    .masonry-column {}

    .masonry-item {}

    .text-module .left {
        font-size: 25px !important;
    }

    @media screen and (max-width: 900px) {
    .intro-article { 
        padding-left:0px; 
        padding-right:0px; 
        padding-top:30px;
    }

    .info-module {

padding-left: 30px;
}

    .data-module {
      width: 100%;
      text-align: left;
      justify-content: center;
      padding-left: 30px;
      margin-left:0px;
    }

    .text-module {
      width: calc(100% - 60px);
      text-align: left;
      justify-content: center;
      padding-left: 30px;
      margin-left:0px;
    }

    .image-stack {
        width: calc(100% + 0px);
        margin-left: -50px;
        margin-top: 20px;
        height: auto;
        padding: 0px 0px;
    }

    .tools-container{

width:calc(100% - 40px); 
padding-left: 20px;
padding-right: 20px; 
padding-bottom:30px; 


}
}

@media screen and (max-width: 600px) {
    .text-module {
        padding-left:10px; 
    }

    .intro-article{
        padding-left:10px; 
       
    }

    .data-module {
      width: 100%;
      text-align: left;
      justify-content: center;
      padding-left: 0px;
      margin-left:10px;
    }

    .image-stack.left {
        margin-left: 100px;
    }

    .image-stack.right {
        margin-left: -180px;
    }

   
}
</style>